<!DOCTYPE html>
<html lang="de" class="scroll-smooth">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MWDF3CGRHL"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-MWDF3CGRHL');
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Über mich – Alexander Schneider, Fachinformatiker Systemintegration</title>
    <meta name="description" content="Werdegang, Skills und Lebenslauf. Fokus: Netzwerke, Server-Administration, DevOps und Automatisierung in Leipzig." />
    <link rel="canonical" href="https://www.alexle135.de/ueber-mich.html" />

    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Alexander Schneider" />
    <meta property="og:title" content="Über mich – Alexander Schneider, Fachinformatiker Systemintegration" />
    <meta property="og:description" content="Werdegang, Skills und Lebenslauf. Fokus: Netzwerke, Server, DevOps und Automatisierung in Leipzig." />
    <meta property="og:url" content="https://www.alexle135.de/ueber-mich.html" />
    <meta property="og:image" content="https://www.alexle135.de/media/alex.webp" />
    <meta property="og:image:alt" content="Alexander Schneider" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Über mich – Alexander Schneider, Fachinformatiker Systemintegration" />
    <meta name="twitter:description" content="Werdegang, Skills und Lebenslauf. Fokus: Netzwerke, Server, DevOps und Automatisierung in Leipzig." />
    <meta name="twitter:image" content="https://www.alexle135.de/media/alex.webp" />
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Startseite",
          "item": "https://www.alexle135.de/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Über mich",
          "item": "https://www.alexle135.de/ueber-mich.html"
        }
      ]
    }
    </script>
    
    <meta name="theme-color" content="#3b82f6">
    
    <link rel="preload" href="dist/tailwind.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="dist/tailwind.css"></noscript>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Manrope:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-p1CmJ2k0rGZMfjNV8+UL1Ji2YfwjlZF7tUj5fe6kKIhxX3sI5Gucs5cjox96D65V6p9LhIwTZPIW4oP4g+OzYQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer">
    
    <link rel="stylesheet" href="src/tokens.css">
    <link rel="stylesheet" href="src/globals.css">
    
    <script type="module">
        import { initializeUI } from './components/ui/index.js';
        initializeUI();
    </script>
    
    <script src="auth.js"></script>
    
    <style>
        :root {
    --brand-from: #3b82f6;
    --brand-to: #8b5cf6;
    
    --neutral-900: #18181b;
}

        html, body { 
    font-family: 'Manrope', 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; 
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

        .bg-gradient-blue { 
    background: 
        radial-gradient(1200px 600px at 10% -10%, rgba(14, 165, 233, 0.3), transparent 60%),
        radial-gradient(1200px 600px at 90% -20%, rgba(217, 70, 239, 0.25), transparent 60%),
        linear-gradient(135deg, #0b1220 0%, #0f172a 100%);
}

        /* Enhanced Sticky nav */
        .sticky-nav { 
            -webkit-backdrop-filter: saturate(180%) blur(20px);
            backdrop-filter: saturate(180%) blur(20px); 
            background: rgba(15,23,42,.8); 
            border-bottom: 1px solid rgba(255,255,255,.1);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }
        
        /* Enhanced Navigation Links */
        .nav-link { 
            color: rgba(255,255,255,.8); 
            transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            padding: 8px 16px;
            border-radius: 12px;
            font-weight: 500;
            text-decoration: none;
            overflow: hidden;
        }
        
        .nav-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(14, 165, 233, 0.2), rgba(217, 70, 239, 0.2));
            transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: -1;
        }
        
        .nav-link:hover::before {
            left: 0;
        }
        
        .nav-link:hover { 
            color: #fff; 
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(14, 165, 233, 0.3);
        }
        
        .nav-link.active { 
            color: #fff; 
            background: linear-gradient(135deg, rgba(14, 165, 233, 0.3), rgba(217, 70, 239, 0.3));
            box-shadow: 0 4px 15px rgba(14, 165, 233, 0.4);
        }
        
        /* Mobile Navigation Enhancements */
        .mobile-nav-link {
            color: rgba(255,255,255,.8);
            transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            padding: 16px 20px;
            border-radius: 16px;
            font-weight: 500;
            text-decoration: none;
            margin: 4px 0;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
        }
        
        .mobile-nav-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(14, 165, 233, 0.3), rgba(217, 70, 239, 0.3));
            transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: -1;
            border-radius: 16px;
        }
        
        .mobile-nav-link:hover::before {
            left: 0;
        }
        
        .mobile-nav-link:hover {
            color: #fff;
            transform: translateX(8px);
            box-shadow: 0 8px 25px rgba(14, 165, 233, 0.3);
            border-color: rgba(14, 165, 233, 0.5);
        }
        
        /* Enhanced CTA Buttons */
        .cta-button {
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, #0ea5e9, #d946ef);
            color: white;
            font-weight: 600;
            padding: 16px 32px;
            border-radius: 16px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 32px rgba(14, 165, 233, 0.3);
            border: 2px solid transparent;
        }
        
        .cta-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255,255,255,0.2), rgba(255,255,255,0.1));
            transition: left 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .cta-button:hover::before {
            left: 100%;
        }
        
        .cta-button:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: 0 16px 48px rgba(14, 165, 233, 0.4);
            border-color: rgba(255,255,255,0.3);
        }
        
        .cta-button:active {
            transform: translateY(-2px) scale(1.02);
        }
        
        /* Floating Action Buttons */
        .floating-cta {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 50;
            background: linear-gradient(135deg, #0ea5e9, #d946ef);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            box-shadow: 0 8px 32px rgba(14, 165, 233, 0.4);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            animation: float 3s ease-in-out infinite;
        }
        
        .floating-cta:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 48px rgba(14, 165, 233, 0.6);
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        /* Pulse Animation for Important Links */
        .pulse-link {
            animation: pulse-glow 2s ease-in-out infinite;
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(14, 165, 233, 0.3); }
            50% { box-shadow: 0 0 30px rgba(14, 165, 233, 0.6), 0 0 40px rgba(217, 70, 239, 0.3); }
        }

        /* Edit panel */
        .edit-panel {
            position: fixed; top: 0; right: -400px; width: 400px; height: 100vh; background: white; box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            transition: right 0.3s ease; z-index: 1000; overflow-y: auto;
        }
        .edit-panel.open { right: 0; }

        .floating-save { position: fixed; bottom: 20px; right: 20px; background: #ef4444; color: white; padding: 12px 24px; border-radius: 50px; box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3); transform: translateY(100px); opacity: 0; transition: all 0.3s ease; z-index: 999; }
        .floating-save.show { transform: translateY(0); opacity: 1; }

        /* Galerie */
        .gallery-card { transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .gallery-card:hover { transform: translateY(-4px); box-shadow: 0 12px 24px rgba(0,0,0,0.25); }

        /* Lightbox */
        .lightbox-backdrop { background: rgba(0,0,0,0.8); }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            /* Navigation mobile */
            .nav-link {
                font-size: 0.875rem;
                padding: 8px 12px;
                border-radius: 12px;
                background: rgba(255, 255, 255, 0.05);
            }
            
            /* Hero section mobile */
            .text-5xl { font-size: 2.5rem; }
            .text-6xl { font-size: 3rem; }
            .text-xl { font-size: 1.125rem; }
            .text-2xl { font-size: 1.25rem; }
        }
        
        @media (max-width: 480px) {
            /* Extra small devices */
            .container {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            
            /* Typography for very small screens */
            .text-5xl { font-size: 2rem; }
            .text-6xl { font-size: 2.5rem; }
            .text-xl { font-size: 1rem; }
            .text-2xl { font-size: 1.125rem; }
            
            /* Button adjustments */
            .cta-button {
                padding: 12px 24px;
                font-size: 0.875rem;
            }
            
            /* Grid adjustments */
            .md\\:grid-cols-2 { grid-template-columns: 1fr; }
            .md\\:grid-cols-3 { grid-template-columns: 1fr; }
        }
        
        @media (max-width: 320px) {
            /* Minimum supported width */
            .container {
                padding-left: 0.75rem;
                padding-right: 0.75rem;
            }
            
            .text-5xl { font-size: 1.75rem; }
            .text-6xl { font-size: 2rem; }
            
            .cta-button {
                padding: 10px 20px;
                font-size: 0.8rem;
            }
            
            .gap-4 { gap: 0.75rem; }
            .gap-6 { gap: 1rem; }
            .gap-8 { gap: 1.25rem; }
        }
    </style>

<script>
    (function() {
        const manifestUrl = '/asset-manifest.json?ts=' + Date.now();
        const cssId = 'app-style';
        const jsId = 'app-script';

        const normalize = (value) => {
            if (!value) return null;
            if (/^https?:\/\//i.test(value)) return value;
            const cleaned = value.replace(/^\/+/, '');
            return '/' + cleaned;
        };

        const injectAssets = ({ css, js }) => {
            if (css && !document.getElementById(cssId)) {
                const link = document.createElement('link');
                link.id = cssId;
                link.rel = 'stylesheet';
                link.href = normalize(css);
                link.crossOrigin = 'anonymous';
                document.head.appendChild(link);
            }

            if (js && !document.getElementById(jsId)) {
                const script = document.createElement('script');
                script.id = jsId;
                script.type = 'module';
                script.defer = true;
                script.src = normalize(js);
                document.head.appendChild(script);
            }
        };

        const loadFromManifest = (manifest) => {
            const cssEntry = Object.keys(manifest).find((key) => key.endsWith('.css'));
            const jsEntry = Object.keys(manifest).find((key) => key.endsWith('.js'));
            injectAssets({
                css: cssEntry ? manifest[cssEntry] : null,
                js: jsEntry ? manifest[jsEntry] : null
            });
        };

        const loadFallback = () => injectAssets({ css: 'dist/tailwind.css', js: 'src/main.js' });

        fetch(manifestUrl, { cache: 'no-store' })
            .then((response) => (response && response.ok ? response.json() : null))
            .then((manifest) => {
                if (manifest && Object.keys(manifest).length > 0) {
                    loadFromManifest(manifest);
                } else {
                    loadFallback();
                }
            })
            .catch(loadFallback);
    })();
</script>
<noscript>
    <link rel="stylesheet" href="/dist/tailwind.css">
</noscript>

</head>
    <body class="bg-neutral-950 text-neutral-50">
    <div class="fixed top-4 right-4 z-50 flex space-x-2">
        <div id="loggedInControls" class="flex space-x-2 hidden">
            <span id="welcomeMessage" class="bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg text-sm"></span>
            <button id="logoutBtn" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg shadow-lg transition-colors">
                <i class="fas fa-sign-out-alt mr-2"></i>Logout
            </button>
        </div>
    </div>

    <section class="relative bg-gradient-blue pt-32 pb-20 overflow-hidden">
        <div class="absolute inset-0 -z-10 overflow-hidden">
            <video
                id="heroVideoBg"
                class="w-full h-full object-cover opacity-60 transition-all duration-1000 ease-out"
                autoplay muted loop playsinline preload="metadata" poster="logo.jpg">
                <source src="https://alexle135.de/media/logovid.webm" type="video/webm">
                <source src="https://alexle135.de/media/logovid.mp4" type="video/mp4">
                Ihr Browser unterstützt das Video-Tag nicht.
            </video>
            <div class="absolute inset-0 bg-gradient-to-b from-neutral-950/70 via-neutral-950/40 to-neutral-950/80"></div>
        </div>
        <div class="container mx-auto px-4 text-center relative z-10">
            <h1 class="editable text-5xl md:text-6xl font-extrabold tracking-tight mb-6 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-purple-500 to-cyan-400" data-field="about.title" data-type="text">Über mich</h1>
            <p class="editable text-xl md:text-2xl mb-8 max-w-4xl mx-auto text-neutral-200/90 leading-relaxed" data-field="about.subtitle" data-type="textarea">
                Ich plane, integriere und betreibe stabile IT‑Infrastrukturen: Netzwerke, Server, Container und Automatisierung.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                <a href="index.html" class="cta-button">
                    <i class="fas fa-home"></i>
                    <span>Zurück zur Startseite</span>
                    <svg class="w-5 h-5 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </a>
                <a href="index.html#contact" class="cta-button">
                    <i class="fas fa-envelope"></i>
                    <span>Kontakt aufnehmen</span>
                    <svg class="w-5 h-5 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </a>
            </div>
        </div>
    </section>

    <section class="py-16 bg-gray-900">
        <div class="container mx-auto px-4">
            <div class="max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-10 items-start">
                <div class="md:col-span-1">
                    <div class="rounded-2xl overflow-hidden ring-2 ring-white/10">
                        <picture>
                            <source srcset="media/alex.webp" type="image/webp">
                            <source srcset="media/alex.avif" type="image/avif">
                            <img src="media/alex.jpeg" alt="Alexander Schneider – Porträt" class="w-full h-full object-cover" loading="lazy" width="400" height="400">
                        </picture>
                    </div>
                </div>
                <div class="md:col-span-2">
                    <h2 class="text-3xl font-bold mb-4 text-white">Hallo, ich bin Alexander</h2>
                    <p class="editable text-white/80 leading-relaxed mb-4" data-field="about.description" data-type="textarea">
                        Systemintegration und DevOps aus Leipzig: Netzwerke, Server und Container – pragmatisch geplant, sauber umgesetzt, zuverlässig betrieben. Ich mag klare Architekturen, Automatisierung und Lösungen, die im Alltag wirklich helfen.
                    </p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div class="bg-white/5 border border-white/10 rounded-xl p-4"><i class="fas fa-location-dot mr-2 text-blue-400"></i><span class="editable" data-field="personalInfo.location" data-type="text">Leipzig, Deutschland</span></div>
                        <div class="bg-white/5 border border-white/10 rounded-xl p-4"><i class="fas fa-envelope mr-2 text-blue-400"></i><span class="editable" data-field="personalInfo.email" data-type="text">schneider@alexle135.de</span></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="py-16 bg-gray-950">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-3xl font-bold text-white">Foto-Galerie</h2>
                <div class="space-x-2">
                    <button id="galleryUploadBtn" class="hidden bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg shadow transition-colors"><i class="fas fa-upload mr-2"></i>Bilder hochladen</button>
                    <button id="gallerySyncBtn" class="hidden bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg shadow transition-colors"><i class="fas fa-sync mr-2"></i>Synchronisieren</button>
                    <input type="file" id="galleryFileInput" accept="image/*" multiple class="hidden" title="Bilder für Galerie auswählen">
                </div>
            </div>
            
            <div id="uploadProgress" class="hidden mb-6">
                <div class="bg-white/5 border border-white/10 rounded-xl p-4">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-white font-medium">Upload läuft...</span>
                        <span id="uploadStatus" class="text-white/70 text-sm"></span>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-2">
                        <div id="uploadBar" class="bg-purple-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                </div>
            </div>
            
            <div id="uploadMessages" class="mb-6 space-y-2"></div>
            <p class="text-white/70 mb-6">Eigene Eindrücke aus Projekten und Alltag. Klick für Vollbild.</p>
            <div id="galleryGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"></div>
        </div>
    </section>

    <section class="py-16 bg-gray-900">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-white mb-8">Lebenslauf</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="md:col-span-2 space-y-6">
                    <div class="bg-white/5 border border-white/10 rounded-xl p-6">
                        <h3 class="text-xl font-semibold mb-2">Berufserfahrung</h3>
                        <ul class="space-y-3 list-disc list-inside">
                            <li class="editable" data-field="cv.experience.0" data-type="text">2024–heute: Fachinformatiker Systemintegration – BFW Leipzig</li>
                            <li class="editable" data-field="cv.experience.1" data-type="text">2023–2024: IT-Projekte & Selbststudium – Web, Server, KI-Workflows</li>
                        </ul>
                    </div>
                    <div class="bg-white/5 border border-white/10 rounded-xl p-6">
                        <h3 class="text-xl font-semibold mb-2">Schwerpunkte</h3>
                        <ul class="space-y-3 list-disc list-inside">
                            <li class="editable" data-field="cv.education.0" data-type="text">Systemintegration & Netzwerktechnik</li>
                            <li class="editable" data-field="cv.education.1" data-type="text">KI-Workflows & Automatisierung</li>
                            <li class="editable" data-field="cv.education.2" data-type="text">Container-Technologien & DevOps</li>
                        </ul>
                    </div>
                </div>
                <div class="space-y-6">
                    <div class="bg-white/5 border border-white/10 rounded-xl p-6">
                        <h3 class="text-xl font-semibold mb-2">Technische Skills</h3>
                        <ul class="space-y-2 list-disc list-inside">
                            <li class="editable" data-field="cv.skills.0" data-type="text">Systemintegration & Netzwerke</li>
                            <li class="editable" data-field="cv.skills.1" data-type="text">KI-Workflows & Automatisierung</li>
                            <li class="editable" data-field="cv.skills.2" data-type="text">Container & Cloud-Technologien</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <a href="index.html#contact" class="floating-cta" title="Kontakt aufnehmen">
        <i class="fas fa-envelope text-xl"></i>
    </a>

    <div id="footer-placeholder"></div>

    <script>
        fetch('footer.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('footer-placeholder').innerHTML = data;
            });
    </script>

    <div id="lightbox" class="fixed inset-0 hidden items-center justify-center lightbox-backdrop z-50">
        <div class="relative max-w-5xl w-full px-4">
                 <button id="lightboxClose" class="absolute -top-10 right-2 text-white text-2xl" title="Lightbox schließen"><i class="fas fa-times"></i></button>
                 <div class="relative bg-black/70 rounded-xl overflow-hidden">
                     <img id="lightboxImage" src="" alt="Bild" class="w-full h-[70vh] object-contain" loading="lazy">
                     <button id="lightboxPrev" class="absolute left-2 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/30 text-white px-3 py-2 rounded-full" title="Vorheriges Bild"><i class="fas fa-chevron-left"></i></button>
                     <button id="lightboxNext" class="absolute right-2 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/30 text-white px-3 py-2 rounded-full" title="Nächstes Bild"><i class="fas fa-chevron-right"></i></button>
             </div>
        </div>
    </div>

    <script src="components/layout/layout-wrapper.js"></script>
    
    <script src="script.js?v=6"></script>
    <script src="auto-reload.js"></script>
    <script>
        class GalleryManager {
            constructor() {
                this.grid = document.getElementById('galleryGrid');
                this.uploadBtn = document.getElementById('galleryUploadBtn');
                this.syncBtn = document.getElementById('gallerySyncBtn');
                this.fileInput = document.getElementById('galleryFileInput');
                this.uploadProgress = document.getElementById('uploadProgress');
                this.uploadBar = document.getElementById('uploadBar');
                this.uploadStatus = document.getElementById('uploadStatus');
                this.uploadMessages = document.getElementById('uploadMessages');
                this.lightbox = document.getElementById('lightbox');
                this.lightboxImg = document.getElementById('lightboxImage');
                this.lightboxPrev = document.getElementById('lightboxPrev');
                this.lightboxNext = document.getElementById('lightboxNext');
                this.lightboxClose = document.getElementById('lightboxClose');
                this.images = [];
                this.currentIndex = 0;
                this.initAsync();
            }
            
            async initAsync() {
                await this.init();
            }
            async init() {
                const isLoggedIn = localStorage.getItem('admin_user') !== null;
                if (isLoggedIn && this.uploadBtn) this.uploadBtn.classList.remove('hidden');
                if (isLoggedIn && this.syncBtn) this.syncBtn.classList.remove('hidden');
                
                if (this.uploadBtn) this.uploadBtn.addEventListener('click', () => this.fileInput && this.fileInput.click());
                if (this.syncBtn) this.syncBtn.addEventListener('click', () => this.syncWithServer());
                if (this.fileInput) this.fileInput.addEventListener('change', (e) => this.handleFiles(e.target.files));
                if (this.lightboxPrev) this.lightboxPrev.addEventListener('click', () => this.show(this.currentIndex - 1));
                if (this.lightboxNext) this.lightboxNext.addEventListener('click', () => this.show(this.currentIndex + 1));
                if (this.lightboxClose) this.lightboxClose.addEventListener('click', () => this.hideLightbox());
                window.addEventListener('keydown', (e) => {
                    if (this.lightbox.classList.contains('hidden')) return;
                    if (e.key === 'ArrowLeft') this.show(this.currentIndex - 1);
                    if (e.key === 'ArrowRight') this.show(this.currentIndex + 1);
                    if (e.key === 'Escape') this.hideLightbox();
                });
                
                // Bilder laden und ggf. mit Standardbildern befüllen
                this.images = await this.loadFromServer();
                if (!Array.isArray(this.images) || this.images.length === 0) {
                    this.images = [
                        { id: 'media_alex_webp', src: 'media/alex.webp', title: 'Alexander', date: new Date().toISOString() },
                        { id: 'media_shoot', src: 'media/shoot.jpeg', title: 'Shoot', date: new Date().toISOString() },
                        { id: 'media_street', src: 'media/42D9CE3F-0143-42C6-B8F4-1E73AC299CFE_1_105_c.jpeg', title: 'City', date: new Date().toISOString() }
                    ];
                }
                this.render();
            }
            async loadFromServer() {
                try {
                    console.log('Loading gallery from server...');
                    const response = await fetch('api.php?action=gallery');
                    console.log('Gallery response status:', response.status);
                    
                    const result = await response.json();
                    console.log('Gallery response data:', result);
                    
                    if (result.success && result.data) {
                        console.log('Loaded', result.data.length, 'images from server');
                        return result.data;
                    } else {
                        console.warn('Gallery response not successful:', result);
                    }
                } catch (error) {
                    console.error('Server-Load fehlgeschlagen:', error);
                }
                
                // Fallback: lokaler Storage
                try { 
                    const localImages = JSON.parse(localStorage.getItem('gallery_images') || '[]');
                    console.log('Using local storage fallback:', localImages.length, 'images');
                    return localImages; 
                } catch { 
                    console.log('No local storage available');
                    return []; 
                }
            }
            saveToStorage() { localStorage.setItem('gallery_images', JSON.stringify(this.images)); }
            
            showProgress(show = true) {
                if (this.uploadProgress) {
                    this.uploadProgress.classList.toggle('hidden', !show);
                }
            }
            
            updateProgress(percent, status = '') {
                if (this.uploadBar) {
                    this.uploadBar.style.width = percent + '%';
                }
                if (this.uploadStatus && status) {
                    this.uploadStatus.textContent = status;
                }
            }
            
            showMessage(message, type = 'info') {
                if (!this.uploadMessages) return;
                
                const messageEl = document.createElement('div');
                messageEl.className = `p-3 rounded-lg text-sm ${
                    type === 'success' ? 'bg-green-500/20 text-green-300 border border-green-500/30' :
                    type === 'error' ? 'bg-red-500/20 text-red-300 border border-red-500/30' :
                    'bg-blue-500/20 text-blue-300 border border-blue-500/30'
                }`;
                messageEl.innerHTML = `<i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'exclamation-triangle' : 'info'} mr-2"></i>${message}`;
                
                this.uploadMessages.appendChild(messageEl);
                
                // Auto-remove after 5 seconds
                setTimeout(() => {
                    if (messageEl.parentNode) {
                        messageEl.parentNode.removeChild(messageEl);
                    }
                }, 5000);
            }
            
            async syncWithServer() {
                this.showProgress(true);
                this.updateProgress(0, 'Synchronisiere mit Server...');
                
                try {
                    this.images = await this.loadFromServer();
                    this.updateProgress(100, 'Synchronisation abgeschlossen');
                    this.showMessage(`${this.images.length} Bilder erfolgreich synchronisiert`, 'success');
                    this.render();
                } catch (error) {
                    this.showMessage('Synchronisation fehlgeschlagen: ' + error.message, 'error');
                } finally {
                    setTimeout(() => this.showProgress(false), 1000);
                }
            }
            async handleFiles(fileList) {
                const files = Array.from(fileList || []);
                const isLoggedIn = localStorage.getItem('admin_user') !== null;
                
                if (files.length === 0) return;
                
                this.showProgress(true);
                this.updateProgress(0, `Lade ${files.length} Bild${files.length > 1 ? 'er' : ''} hoch...`);
                
                let successCount = 0;
                let errorCount = 0;
                
                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    const progress = Math.round((i / files.length) * 100);
                    this.updateProgress(progress, `Verarbeite ${file.name}...`);
                    
                    try {
                        if (isLoggedIn) {
                            try {
                                await this.uploadToServer(file);
                                successCount++;
                            } catch (e) {
                                console.warn('Server-Upload fehlgeschlagen:', e);
                                // Fallback: lokale Speicherung
                                const src = await this.compressImage(file, 1600, 0.85);
                                this.images.unshift({ 
                                    id: Date.now() + '_' + Math.random().toString(36).slice(2), 
                                    src, 
                                    title: file.name, 
                                    date: new Date().toISOString() 
                                });
                                successCount++;
                            }
                        } else {
                            // Nicht eingeloggt: nur lokale Speicherung
                            const src = await this.compressImage(file, 1600, 0.85);
                            this.images.unshift({ 
                                id: Date.now() + '_' + Math.random().toString(36).slice(2), 
                                src, 
                                title: file.name, 
                                date: new Date().toISOString() 
                            });
                            successCount++;
                        }
                    } catch (error) {
                        console.error('Fehler beim Verarbeiten von', file.name, ':', error);
                        errorCount++;
                    }
                }
                
                this.updateProgress(100, 'Synchronisiere Galerie...');
                
                // Nach Upload: Bilder vom Server neu laden (falls eingeloggt)
                if (isLoggedIn) {
                    this.images = await this.loadFromServer();
                } else {
                    this.saveToStorage();
                }
                
                // Feedback anzeigen
                if (successCount > 0) {
                    this.showMessage(`${successCount} Bild${successCount > 1 ? 'er' : ''} erfolgreich ${isLoggedIn ? 'hochgeladen' : 'hinzugefügt'}`, 'success');
                }
                if (errorCount > 0) {
                    this.showMessage(`${errorCount} Bild${errorCount > 1 ? 'er' : ''} konnten nicht verarbeitet werden`, 'error');
                }
                
                this.render();
                
                // Progress nach 2 Sekunden ausblenden
                setTimeout(() => this.showProgress(false), 2000);
            }
            async deleteImage(id) {
                const isLoggedIn = localStorage.getItem('admin_user') !== null;

                if (isLoggedIn) {
                    try {
                        // Server-seitiges Löschen (falls API-Endpoint existiert)
                        const response = await fetch(`api.php?action=delete&file=${encodeURIComponent(id)}`, {
                            method: 'DELETE',
                            credentials: 'include'
                        });

                        if (response.ok) {
                            // Nach Löschen: Bilder vom Server neu laden
                            this.images = await this.loadFromServer();
                        } else {
                            throw new Error('Server delete failed');
                        }
                    } catch (error) {
                        console.warn('Server-Delete fehlgeschlagen, nutze lokales Löschen:', error);
                        // Fallback: lokales Löschen
                        this.images = this.images.filter(img => img.id !== id);
                        this.saveToStorage();
                    }
                } else {
                    // Lokales Löschen
                    this.images = this.images.filter(img => img.id !== id);
                    this.saveToStorage();
                }

                this.render();
            }
            async uploadToServer(file) {
                const form = new FormData();
                form.append('file', file);

                const res = await fetch('api.php?action=upload', {
                    method: 'POST',
                    credentials: 'include',
                    body: form
                });
                
                console.log('Response status:', res.status, res.statusText);
                
                if (!res.ok) {
                    const errorText = await res.text();
                    console.error('Upload failed:', errorText);
                    throw new Error(`HTTP ${res.status}: ${errorText}`);
                }
                
                const json = await res.json();
                console.log('Upload response:', json);
                
                if (!json.success) {
                    throw new Error(json.message || 'Upload fehlgeschlagen');
                }
                
                if (!json.data || !json.data.url) {
                    throw new Error('Keine URL in der Antwort erhalten');
                }
                
                return json.data.url;
            }
            async compressImage(file, maxWidth = 1600, quality = 0.85) {
                const img = await new Promise((res, rej) => {
                    const i = new Image();
                    i.onload = () => res(i); i.onerror = rej; i.src = URL.createObjectURL(file);
                });
                const scale = Math.min(1, maxWidth / img.width);
                const canvas = document.createElement('canvas');
                canvas.width = Math.round(img.width * scale);
                canvas.height = Math.round(img.height * scale);
                const ctx = canvas.getContext('2d');
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                return canvas.toDataURL('image/jpeg', quality);
            }
            render() {
                if (!this.grid) return;
                const isLoggedIn = localStorage.getItem('admin_user') !== null;
                this.grid.innerHTML = this.images.map((it, idx) => `
                    <div class="gallery-card bg-white/5 border border-white/10 rounded-xl overflow-hidden">
                        <div class="relative cursor-pointer" data-index="${idx}">
                            <img src="${it.src}" alt="${it.title}" class="w-full h-56 object-cover" loading="lazy" width="400" height="224">
                            <div class="absolute bottom-0 left-0 right-0 bg-black/40 text-white text-sm px-3 py-2 flex items-center justify-between">
                                <span class="truncate">${it.title}</span>
                                ${isLoggedIn ? `<button data-action="delete" data-id="${it.id}" class="ml-3 text-red-300 hover:text-red-200"><i class=\"fas fa-trash\"></i></button>` : ''}
                            </div>
                        </div>
                    </div>
                `).join('');
                // bind clicks
                this.grid.querySelectorAll('[data-index]').forEach(el => el.addEventListener('click', (e) => {
                    if (e.target.closest('[data-action="delete"]')) {
                        e.stopPropagation();
                        const id = e.target.closest('[data-action="delete"]').dataset.id;
                        this.deleteImage(id);
                        return;
                    }
                    const target = e.currentTarget;
                    const idx = parseInt(target.getAttribute('data-index'), 10);
                    // ignore delete button
                    if (e.target && (e.target.closest && e.target.closest('[data-action="delete"]'))) return;
                    this.show(idx);
                }));
                this.grid.querySelectorAll('[data-action="delete"]').forEach(btn => btn.addEventListener('click', (e) => {
                    const id = btn.getAttribute('data-id');
                    this.images = this.images.filter(x => x.id !== id);
                    this.saveToStorage();
                    this.render();
                    e.stopPropagation();
                }));
            }
            show(index) {
                if (this.images.length === 0) return;
                if (index < 0) index = this.images.length - 1;
                if (index >= this.images.length) index = 0;
                this.currentIndex = index;
                const item = this.images[index];
                this.lightboxImg.src = item.src;
                this.lightbox.classList.remove('hidden');
                this.lightbox.classList.add('flex');
            }
            hideLightbox() {
                this.lightbox.classList.add('hidden');
                this.lightbox.classList.remove('flex');
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            try {
                if (typeof LiveEditor !== 'undefined') {
                    if (!window.liveEditor) window.liveEditor = new LiveEditor();
                } else if (!window.liveEditor) {
                    initializeBasicEditMode && initializeBasicEditMode();
                }
            } catch (e) { console.warn(e); }
            window.galleryManager = new GalleryManager();
        });
    </script>
</body>
</html>
