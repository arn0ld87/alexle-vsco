---
---
<script is:inline>
  const storageKey = 'theme';
  const root = document.documentElement;
  const readStoredTheme = () => {
    try {
      return localStorage.getItem(storageKey);
    } catch (error) {
      return null;
    }
  };
  const applyTheme = (theme) => {
    const isDark = theme === 'dark';
    root.classList.toggle('dark', isDark);
    try {
      localStorage.setItem(storageKey, theme);
    } catch (error) {
      /* ignore */
    }
  };
  const stored = readStoredTheme();
  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
  const initialTheme = stored ?? (prefersDark ? 'dark' : 'light');
  applyTheme(initialTheme);
</script>
