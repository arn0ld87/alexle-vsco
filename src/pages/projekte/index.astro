---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const projects = await getCollection('projects');
---
<BaseLayout title="Projekte" description="Case Studies zu Infrastruktur, Automatisierung und KI-Lösungen.">
  <main class="container mx-auto px-4 py-16">
    <header class="max-w-2xl space-y-4">
      <p class="text-sm uppercase tracking-[0.2em] text-blue-400">Case Studies</p>
      <h1 class="text-4xl font-semibold tracking-tight">Projekte</h1>
      <p class="text-lg text-gray-300">
        Einblick in ausgewählte Arbeiten rund um Systemintegration, DevOps und KI-gestützte Workflows.
      </p>
    </header>

    <div class="mt-12 grid gap-6 md:grid-cols-2">
      {projects.map((project) => (
        <article class="flex h-full flex-col rounded-lg border border-white/10 bg-white/5">
          {project.data.heroImage && (
            <img
              src={`/${project.data.heroImage}`}
              alt=""
              class="h-48 w-full rounded-t-lg object-cover"
              loading="lazy"
            />
          )}
          <div class="flex flex-1 flex-col p-6">
            <h2 class="text-2xl font-medium">{project.data.title}</h2>
            <p class="mt-3 text-sm text-gray-300">{project.data.summary}</p>
            {project.data.tags && (
              <ul class="mt-4 flex flex-wrap gap-2 text-xs uppercase tracking-wide text-gray-500">
                {project.data.tags.map((tag) => (
                  <li class="rounded bg-white/10 px-2 py-1">{tag}</li>
                ))}
              </ul>
            )}
            <div class="mt-auto pt-6">
              <a
                href={`/projekte/${project.slug}/`}
                class="inline-flex items-center gap-2 text-sm font-medium text-blue-400 transition hover:text-blue-300 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-400"
              >
                Projekt ansehen
                <span aria-hidden="true">→</span>
              </a>
            </div>
          </div>
        </article>
      ))}
    </div>
  </main>
</BaseLayout>
